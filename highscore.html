<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./assets/style.css">
    <title>Quiz Game</title>
</head>

<body>

    <h1>
        Highscores
    </h1>
    <div class="container text-center">
        <div class="row" id="initial-box">

        </div>
    </div>

    <div>
        <a href="./index.html" class="Start"> Replay </a>
    </div>


</body>
<script>
    // done to get the score variable from the other file
    const urlParams = new URLSearchParams(window.location.search);
    const score = urlParams.get("score");


    // Retrieve the stored scores from localStorage
    var storedScores = localStorage.getItem("userList");
    // If scores are found, parse as JSON; otherwise, initialize as an empty array
    var scoresArray = storedScores ? JSON.parse(storedScores) : [];
    // Sort the scores in descending order based on the score value
    scoresArray.sort((a, b) => b.score - a.score);
    // Display the top 10 scores
    for (let i = 0; i < Math.min(10, scoresArray.length); i++) {
    // create array variable 
        var scoreEntry = scoresArray[i];
        console.log(scoreEntry.initials, scoreEntry.score);
    }
    console.log(scoreEntry.initials);
    console.log(scoreEntry.score);


    function renderToScreen() {
        var highScoreContainer = document.getElementById("initial-box");

        for (let i = 0; i < Math.min(10, scoresArray.length); i++) {
            var scoreEntry = scoresArray[i];
            // Create elements to display initials and scores
            var initialsEl = document.createElement("div");
            initialsEl.classList.add('col');
            initialsEl.textContent = scoreEntry.initials;

            var scoreEl = document.createElement("div");
            scoreEl.classList.add('col');
            scoreEl.textContent = scoreEntry.score;

            // Create a new row for each entry
            var row = document.createElement("div");
            row.classList.add('row');

            // Append the elements to the container
            highScoreContainer.appendChild(initialsEl);
            highScoreContainer.appendChild(scoreEl);

            // Append the row to the container
            highScoreContainer.appendChild(row);
        }
    };
    // calling function 
    renderToScreen();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>